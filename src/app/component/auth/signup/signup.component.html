<form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="auth-form" novalidate>
  <div class="field">
    <label for="signup-email">Email</label>
    <input
      id="signup-email"
      type="email"
      formControlName="email"
      placeholder="ash.ketchum@pokedex.com"
      autocomplete="email"
      [class.field__input--invalid]="email.touched && email.invalid"
    />
    <div class="field__errors" *ngIf="email.touched && email.invalid">
      <span *ngIf="email.errors?.['required']">Email is required.</span>
      <span *ngIf="email.errors?.['email']"> Please enter a valid email. </span>
    </div>
  </div>

  <div class="field">
    <label for="signup-username">Username</label>
    <input
      id="signup-username"
      type="text"
      formControlName="username"
      placeholder="AshKetchum"
      autocomplete="username"
      [class.field__input--invalid]="username.touched && username.invalid"
    />
    <div class="field__errors" *ngIf="username.touched && username.invalid">
      <span *ngIf="username.errors?.['required']"> Username is required. </span>
      <span *ngIf="username.errors?.['minlength']"> Username must be at least 3 characters. </span>
    </div>
  </div>

  <div class="field">
    <label for="signup-password">Password</label>
    <div class="field__password-wrapper">
      <input
        id="signup-password"
        [type]="showPassword ? 'text' : 'password'"
        formControlName="password"
        placeholder="At least 8 characters"
        autocomplete="new-password"
        [class.field__input--invalid]="password.touched && password.invalid"
      />
      <button type="button" class="field__password-toggle" (click)="showPassword = !showPassword">
        {{ showPassword ? 'Hide' : 'Show' }}
      </button>
    </div>

    <div
      class="field__helper"
      [class.field__helper--valid]="password.valid && password.touched"
      [class.field__helper--invalid]="password.invalid && password.touched"
    >
      • At least 8 characters<br />
      • At least one letter and one digit
    </div>

    <div class="field__errors" *ngIf="password.touched && password.invalid">
      <span *ngIf="password.errors?.['required']"> Password is required. </span>
      <span *ngIf="password.errors?.['minlength']"> Password must be at least 8 characters. </span>
      <span *ngIf="password.errors?.['pattern']">
        Password must contain at least one letter and one number.
      </span>
    </div>
  </div>

  <button
    type="submit"
    class="auth-btn auth-btn--primary"
    [disabled]="signupForm.invalid || isSubmitting"
  >
    {{ isSubmitting ? 'Creating account…' : 'Create account' }}
  </button>

  <p class="auth-switch">
    Already have an account?
    <a routerLink="../login" class="auth-link">Login</a>
  </p>

  <p *ngIf="submitError" class="field__errors">
    {{ submitError }}
  </p>
</form>
