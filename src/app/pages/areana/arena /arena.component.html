<app-arena-shell
  [isFindingMatch]="isFindingMatch()"
  [stage]="stage()"
  (fight)="enterBattle()"
  (backToStart)="goStart()"
>
  <!-- STAGE: START -->
  <app-arena-start-stage
    *ngIf="stage() === 'start'"
    (start)="startBattle()"
  />

  <!-- STAGE: PICK FAVORITE POKEMON -->
  <app-arena-pick-pokemon-stage
    *ngIf="stage() === 'pickPokemon'"
    [favorites]="favoritePokemons()"
    (selectPokemon)="onPokemonChosen($event)"
    [artworkUrlFn]="artworkUrl.bind(this)"
    [titleCaseFn]="titleCase.bind(this)"
    [pokemonIdFn]="pokemonId.bind(this)"
    [pokemonNameFn]="pokemonName.bind(this)"
  />

  <!-- STAGE: PICK 3 MOVES (ONLY FIRST 5 MOVES) -->
  <app-arena-pick-moves-stage
    *ngIf="stage() === 'pickMoves'"
    [pokemon]="selectedPokemon()"
    (confirmMoves)="onMovesChosen($event)"
    [titleCaseFn]="titleCase.bind(this)"
  />

  <!-- STAGE: FIGHT (YOUR EXISTING RING DESIGN) -->
  <app-arena-fight-stage
    *ngIf="stage() === 'fight'"
    [playerPokemon]="selectedPokemon()"
    [playerMoves]="selectedMoves()"
    [playerArtwork]="artworkUrl(pokemonId(selectedPokemon()))"
    [playerName]="titleCase(pokemonName(selectedPokemon())) || 'Player'"
    [isFindingMatch]="isFindingMatch()"
  />
</app-arena-shell>